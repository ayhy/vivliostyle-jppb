/* test
 * For all media (print, screen)
 */

/* you can import partial SCSS files */
/* @import '_variables'; */
/* @import '_toc'; */
/* ... */

@use "./_param.scss" as param;

@charset "UTF-8";

html {
  writing-mode: vertical-rl;
  orphans: 1;
  widows: 1;
}

* {
  margin: 0;
  padding: 0;
}

body > section {
  string-set: section attr(title);
  break-after: page;
}


@page {
  size: param.$page_width param.$page_height;

  font-size: 8.5pt; /*12Q*/
  font-family:'Gilda Display', 'GenEiChikuMin', serif;

/* æ–­ã¡åˆ‡ã‚Šã€å¡—ã‚Šè¶³ã—ã®æŒ‡å®š - ä¸è¦ãªå ´åˆã¯ã“ã“ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã™ã‚‹ */

@if param.$use_bleed { 
  bleed: param.$bleedmargin; 
  marks: crop cross; 
}
/* ä½™ç™½ã®æŒ‡å®š */
  margin-top: param.$topmargin; /*å¤©*/
  margin-bottom: param.$bottommargin; /*åœ°*/
  margin-left: param.$lrmargin; /*å°å£*/
  margin-right: param.$lrmargin; /*å°å£*/
}

@page :left {
  margin-right: param.$bindmargin; /*ãƒãƒ‰*/
  @bottom-left {
    font-size: 8pt;
      content: counter(page) 'ã€€' env(pub-title);
      margin-left: 0mm;
      margin-bottom: 3mm;
      writing-mode: horizontal-tb;
  }

  @if param.$use_bleed { 
    /* éš ã—ãƒãƒ³ãƒ–ãƒ« */
    @top-right-corner {
      margin-top:calc(0mm - (param.$bleedmargin)*2.0 - 5pt);
      margin-right:0;
      vertical-align: top;
      text-align: right;
      font-size: 5pt;
      color:black;
      content: counter(page);
      writing-mode: horizontal-tb;
    }
  }
}

@page :right {
  margin-left: param.$bindmargin; /*ãƒãƒ‰*/
  @bottom-right {
      font-size: 8pt;

      content: string(section) 'ã€€' counter(page);
      margin-right: 5mm;
      margin-bottom: 3mm;
      content: counter(page);

      writing-mode: horizontal-tb;
  }
  @if param.$use_bleed { 
    /* éš ã—ãƒãƒ³ãƒ–ãƒ« */
    @top-left-corner {
      margin-top:calc(0mm - (param.$bleedmargin)*2.0 - 5pt);
      margin-left:0;
      vertical-align: top;
      text-align: left;
      font-size: 5pt;
      color:black;
      content: counter(page);
      writing-mode: horizontal-tb;
    }
  }
}

@page :blank { /* ç¾verã§ã¯èªè­˜ã•ã‚Œãšã€æç”»ã‚‚ã•ã‚Œãªã„ï¼Ÿ */
  @if param.$use_bleed { 
    /* éš ã—ãƒãƒ³ãƒ–ãƒ« */
    @top-center {
      margin-top:calc(0mm - (param.$bleedmargin)*2.0 - 5pt);
      margin-left:0;
      vertical-align: top;
      text-align: left;
      font-size: 5pt;
      color:black;
      content: counter(page);
      writing-mode: horizontal-tb;
    }
  }
}

@page frontmatter { /* Named page rule (name: "frontmatter") */

  @bottom-left { content: none; }
  @bottom-right { content: none; }
}

@page backmatter { /* Named page rule (name: "backmatter") */

  @bottom-left { content: none; }
  @bottom-right { content: none; }
}

@page shortstory_title { /* Named page rule (name: "shortstory_title") */

  @bottom-left { content: none; }
  @bottom-right { content: none; }
}

@page illustration{
  margin: calc(0mm - param.$bleedmargin);
  @bottom-left { content: none; }
  @bottom-right { content: none; }
}

html {
  font-family:'Gilda Display', 'GenEiChikuMin', serif;
  /* ç´„ç‰©ã®èª¿æ•´ã€å’Œæ¬§æ–‡é–“ã‚¹ãƒšãƒ¼ã‚¹ */
  text-spacing: space-first allow-end ideograph-alpha ideograph-numeric;
  line-height: 2em;
}

body{
  margin-top:0mm;
  margin-bottom:0mm;
}

h1 {
  font-weight: bold;
  font-size: 1.35rem;
  break-after: avoid;
  line-height: 6rem;
  letter-spacing: 0.125em;
}

h2 {
  font-weight: normal;
  font-size: 1.18rem;
  text-indent: 3rem;
  break-after: avoid;
  line-height: 4rem;
}

ruby > rt {
  font-size: 0.4rem;
  margin-top:-2px; /*for firefox only*/
  margin-bottom:-2px; /*for firefox only*/
  margin-left:-1px; /*for firefox only*/
  margin-right:-1px; /*for firefox only*/
}

p {
  text-indent: 0em;
  /* æ®µè½å…ˆé ­ç´„ç‰©ã®èª¿æ•´ã€è¡Œæœ«å¥èª­ç‚¹ã¶ã‚‰ä¸‹ã’ã‚ã‚Š */
  hanging-punctuation: first allow-end;
}

header{
  display:none;
}
/* Role-Related Layout Styles */
/* å‰ä»˜ã‘ */
section[role="frontmatter"] {
  page: frontmatter;
  position:absolute;
  bottom:0;
  left:10vw;
  width:90vw;
  height:100vh;

  writing-mode: horizontal-tb;
  margin:0mm;
  padding:0;
  text-align: center;
  /*
  width:100vw;
  height: 100vh;
  orphans: 1;
  widows: 1;
  margin: auto;
  text-align: center;
  */

  /* å¢æ›¸ã€æ–‡åº«ã€æ–°æ›¸ãªã©ã®ã‚·ãƒªãƒ¼ã‚ºå */
  .series {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  /* é¡Œå */
  .maintitle {
    font-family: 'Zen Old Mincho', serif;
    font-weight: 700;
    font-size: 2rem;
    line-height: 4rem;
    padding-top:2em;
    padding-bottom:2em;
  }

  /* å‰¯é¡Œ */
  .subtitle {
    display: inline-block;
    font-family: 'Faster One', cursive;
    line-height:1.2em; font-style:normal;
    font-weight:400; font-size: 20px;
    border-style:solid; border-color:black;
    padding-top:0em;
    padding-bottom:0em;
    width:fit-content;
    margin-top:2em;
    margin-bottom:3em;
    padding-right: 0.15em;
  }

  /* è£œè¶³ */
  .extra {
    display:inline-block;
    width:fit-content;
    padding-bottom:4em;
  }

  /* ç‰ˆå…ƒ */
  .publisher {
    display:block;
  }

  .disclaimer {
    display:block;
    text-align: left;
    position: absolute;
    bottom: 20pt;
    font-size: 7.5pt;
    line-height: 13pt;
  }
}


/* ç›®æ¬¡ */
section[role="toc"]{
  page: frontmatter;
  &:after{
    counter-reset: chap;
  }
  nav{
    font-size:8.5pt;
    /* ãƒšãƒ¼ã‚¸å†…äºŒæ®µçµ„*/
    /* è¤‡æ•°ãƒšãƒ¼ã‚¸ã«è·¨ãŒã‚‹äºŒæ®µçµ„ã¿ã¨ã—ã¦ã¯ä½¿ãˆãªã„ */
    /* è¤‡æ•°ãƒšãƒ¼ã‚¸ã«è·¨ãŒã‚‹äºŒæ®µçµ„ã¿ã‚’ä½¿ã†å ´åˆã¯ã€src.jsonã®tocã®ã¨ã“ã‚ã§ */
    /* ãã®å ´åˆã¯ scr.jsonã®style>toc>ã®æœ«å°¾ã« */
    /* ./theme/make_2column.cssã‚’æŒ‡å®šã™ã‚‹ã“ã¨ */

    column-gap: 3em;
    column-fill: balance; /* autoã¯chromeã®å ´åˆè¡¨ç¤ºãŒå´©ã‚Œã‚‹*/
    column-count:2;

    padding-bottom:12mm;
    margin-left:0mm;
    margin-right:0mm;

    width:80vw;

    /* 1éšå±¤ç›®ã«ã®ã¿ç« ã‚’ã¤ã‘ã‚‹ã€€*/
    &>ul,&>ol {
      counter-reset: chap;
      & > li{
        display: flex;
        flex-direction: column;   /* flex containerã®ç¸¦æ›¸ãè¨­å®š */
        justify-content: flex-start;   /* å·¦å³è¨­å®š - å³ */
        align-items: flex-between;   /* ä¸Šä¸‹é…ç½® - ä¸Š */
        height:40vh; /* ç›®æ¬¡é«˜ã•è¨­å®š */
        margin-top:0em;
        margin-left:0em;
      }

      /* ç¬¬Nç« ã€€ã®è¡¨ç¤ºã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹å ´åˆã«ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã™ã‚‹*/
      /* äºŒæ¡ä»¥ä¸Šã®ç« æ•°ã ã¨æ¼¢æ•°å­—è¡¨è¨˜ãŒãŠã‹ã—ããªã‚‹ãŸã‚ã€ç¾çŠ¶ã¯éæ¨å¥¨*/
      /* æ¼¢æ•°å­—è¡¨è¨˜ã¯cjk-ideographicã§ã¯ãªãã€@counter-styleå®šç¾©ã® */
      /* cjk-decimal ã‹ japanese-informalã€ã¾ãŸã¯ãã‚Œå‚ç…§ã—ãŸã‚‚ã®ãŒæœ›ã¾ã—ã„ */
      /* â€»202207æ™‚ç‚¹ã§ã¯counter-styleã¯ã‚µãƒãƒ¼ãƒˆå¤–*/
      /*
      & > li::after {
        display: inline flex;
        counter-increment: chap;
        content: "ç¬¬" counter(chap,cjk-decimal) "ç«  ";
        text-combine-upright: digits 2;
        float: top;
        width: 0em;
        margin-top: -4em;
      }
      */
    }
    
    li {
      a {
        display: flex;
        float:top;
        width: 100%;
        text-decoration: none;
        color: currentcolor;
        break-inside: avoid;
        order: 1;

        &::before{ /* ç‚¹ç·š */
          display:inline;
          float: top;
          margin-left: 1px;
          margin-right: 1px;
          border-top: solid 3px white;
          border-bottom: solid 3px white;
          content: "ã€€";
          background-image : linear-gradient(to bottom, rgb(0, 0, 0), rgb(0, 0, 0) 2px, transparent 1px, transparent 1px); 
          background-size: 1px 9px; /*é–“éš”ã«å½±éŸ¿*/
          transform:translate(1px,0px);
          background-position: center;
          background-repeat: repeat-y;
          align-self: flex-end;
          order: 1;
          flex: auto;
        }
        &::after{ /* ãƒªãƒ³ã‚¯ */
          display: inline flex;
          font-size:5pt;
          content: target-counter(attr(href, url), page,decimal);
          text-combine-upright: all; /*è‹±æ•°å­—ç¸¦ä¸­æ¨ª*/
          flex: none;
          order: 1;
          text-align:left;
        }
      }
    }
  }
}

/*çŒ®è¾*/
section[role="dedication"]{
  page: frontmatter;
  font-size:8.5pt;
  position: absolute;
  top: 60%;
  left: 55%;
  height:80vh;
  transform: translate(-50%, -50%);

}

/*ã‚¨ãƒ”ã‚°ãƒ©ãƒ•*/
section[role="epigraph"]{
  page: frontmatter;
}

/* ä¸­æ‰‰ */
section[role="halftitle"] {
  page: frontmatter;
  h1{
    font-family: 'Zen Old Mincho', serif;
    position: absolute;
    top: 30%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-style: bold;
    page-break-before: always;
    page-break-after: always;
  }
}

/* æœ¬æ–‡ */
section[role="doc-body"] {
  page: default;
  font-size:8.75pt; /*12Q / QæŒ‡å®šã‚‚å¯èƒ½*/
  line-height:15pt;
  page-break-inside: auto;

  /*ãƒ•ã‚©ãƒ³ãƒˆã¨ã®ç›¸æ€§ã«ã‚ˆã£ã¦ã¯ã“ã¡ã‚‰ã®ã»ã†ãŒè¦‹ã‚„ã™ã„ã‚±ãƒ¼ã‚¹ã‚ã‚Š*/

  /* äºŒæ®µçµ„ 
  columné–¢é€£ã®æŒ‡å®šã¯ã€ç¾æ™‚ç‚¹ã§ã¯body/htmlä¸‹ã§æŒ‡å®šã—ãªã„ã‹ãã‚Š
  æ©Ÿèƒ½ã—ãªã„ã®ã§ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã™ã‚‹ã€‚
  é–¢é€£â†’https://github.com/vivliostyle/vivliostyle.js/issues/579
  ä»£ã‚ã‚Šã«make_column.cssã‚’æœ¬æ–‡ãƒ•ã‚¡ã‚¤ãƒ«ã§æŒ‡å®šã—ã¦èª­ã¿è¾¼ã‚€
  column-fill:auto;
  column-gap: 2em;
  column-count:2;
  line-height:16pt;
  margin-left:15mm;
  margin-right:15mm;
  */
  /* ç« é¡Œ */
  h1 {
    display:block;
/*    position:absolute;*/
    right:10mm;
    font-size: 12pt;
    font-style: normal;
    line-height:15pt;

    /* ç¬¬Nç« ã€€ã®è¡¨ç¤ºã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹å ´åˆã«ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã™ã‚‹*/
    /* äºŒæ¡ä»¥ä¸Šã®ç« æ•°ã ã¨æ¼¢æ•°å­—è¡¨è¨˜ãŒãŠã‹ã—ããªã‚‹ãŸã‚ã€ç¾çŠ¶ã¯éæ¨å¥¨*/
    /* æ¼¢æ•°å­—è¡¨è¨˜ã¯cjk-ideographicã§ã¯ãªãã€@counter-styleå®šç¾©ã® */
    /* cjk-decimal ã‹ japanese-informalã€ã¾ãŸã¯ãã‚Œå‚ç…§ã—ãŸã‚‚ã®ãŒæœ›ã¾ã—ã„ */
    /* â€»202207æ™‚ç‚¹ã§ã¯counter-styleã¯ã‚µãƒãƒ¼ãƒˆå¤–*/
    /*
    counter-increnemt: chap;
      &::before{
      display: inline flex;
      counter-increment: chap;
      content: "ç¬¬" counter(chap,cjk-decimal) "ç«  ";
      float: top;
      width: 0em;
      margin-top: -4em;
    }
    */
    }
  
  /* ç« å‰¯é¡Œ */
  h2 {
    font-size:8.75pt;
    page-break-before: auto;
    page-break-after: auto;
    text-indent: 0em;
    margin-top:2em;
    line-height:15pt;
    &:before{
      content: "â—†ã€€";
      font-size:8.75pt;
      display:inline;
    }
  }
  &>section{
    page-break-after: auto;
    margin-left:0;
    margin-right:0;
  }
  .body-text {
    font-style: normal;
  }

  /* è£œè¶³ãƒ†ã‚­ã‚¹ãƒˆ */
  .comment{
    font-style: normal;
  }
  .script{ /* ç‰¹æ®Šå½¢å¼ - å°æœ¬ */
    p{
      padding-top:2em; /*äººåã®æœ€å¤§æ–‡å­—æ•°ã‚’æŒ‡å®š*/
      .name{
        display:inline-block;
        margin-top:-2em; /*äººåã®æœ€å¤§æ–‡å­—æ•°ã‚’æŒ‡å®š*/
        &::after{
          content:"ï¼š"
        }
      }
    }
  }
  .illustration{ /* æŒ¿çµµ - ç´™é¢+å¡—ã‚Šè¶³ã— */
    page: illustration;
    position:absolute;
    margin:0mm;
    page-break-before: always;
    page-break-after: always;
    width:calc(param.$page_width + ( 2 * param.$bleedmargin) );
    height:calc(param.$page_height + ( 2 * param.$bleedmargin) );
    /*
      border-color: gray;
      border-width: 1px;
      border-style: dashed;
    */
    img{
      image-resolution: 350dpi;
    }
  }
}



/*æœ¬æ–‡ãƒ»ç‰¹æ®Šå½¢å¼ - çŸ­ç·¨å°èª¬ã®è¡¨é¡Œ+æ”¹ãƒšãƒ¼ã‚¸+æœ¬æ–‡å½¢å¼*/
section[role="doc-body"].shortstory{
  page-break-before: recto;
  page: shortstory_title;
  h1{
    overflow: visible;
    font-family: 'Zen Old Mincho', serif;
    writing-mode: horizontal-tb;
    position: absolute;
    left:0pt;
    margin-top:48vh;    
    transform:tranlate(-50% -50%);
    bottom: 0px;
    font-style: bold;
    page-break-before: always;
    page-break-after: avoid;
    font-size:15pt;
  }
  h2:first-of-type:not(.comment) {
    overflow: visible;
    position: absolute;
    writing-mode: horizontal-tb;
    left:0pt;
    margin-top:52vh;    
    page-break-before: avoid;
    page-break-after: avoid;
    height:50vh;
    top: 50%;
    left: 30%;
    transform: translate(-50%, -50%);
    font-style: bold;
    &::before{
      content:"";
    }
  }
  section.body-text{
    page: default; /*ãƒšãƒ¼ã‚¸ç•ªå·ã‚’è¡¨ç¤ºçŠ¶æ…‹ã¸*/
  }
  .comment p{
    page: default; /*ãƒšãƒ¼ã‚¸ç•ªå·ã‚’è¡¨ç¤ºçŠ¶æ…‹ã¸*/
    h2 {
      position:relative;
      display:inline-block;
      font-size:8.75pt;
      page-break-before: auto;
      page-break-after: auto;
      text-indent: 0em;
      margin-top:2em;
      line-height:15pt;
      &:before{
        content: "â—†ã€€";
        font-size:8.75pt;
        display:inline;
      }
    }
  }
}

/* å¾Œä»˜ã‘ */
section[role='colophon'] {
  page: backmatter;
  page-break-before: verso;
  writing-mode: horizontal-tb;
  width:40vh;
  height:25vh;
  position:absolute;
  vertical-align: bottom;
  bottom:10mm;
  font-size:8pt;
  /* å¥¥ä»˜æœ¬ä½“ */
  .title{
    font-family: 'Zen Old Mincho', serif;
    font-size:13pt;
    line-height:16pt;
  }
  dl{
    display:flex;
    align-items: stretch;
    flex-wrap: wrap;
    font-size:8pt;
    line-height:10pt;
    margin-top:1px;
    margin-bottom:1px;
    margin-left:0px;
    margin-right:0px;
    padding-top: 1px;
    padding-bottom: 1px;
      dt {
        width: 20%; /* dt width + dd width must be 100%*/
      }
      dd {
        width: 80%;
      }
  }
  hr {
    border-top: 1px solid black;
  }
  .note{
    display: block;
    font-size:7.5pt;
    line-height:1.6em;
    border-top: solid 1px black;
  }
  /* è‘—è€… */
  .author {
    text-align: end;
    font-size: 1rem;
    font-weight: bold;
    letter-spacing: 0.125em;
  }
}


/* Universal Layout settings  */

/* ç¸¦ä¸­æ¨ª */
.tcy {
  text-combine-upright: all;
}

.upright {
  text-orientation: upright;
}

/* å‚ç‚¹ï¼ˆãƒ»ï¼‰ */
.dotted {
  font-style: normal;
  text-emphasis-style: dot;
}


/* åœç‚¹ï¼ˆã‚´ãƒï¼‰ */
em.sesame_dot {
  font-style: normal;
  text-emphasis-style: sesame;
}

.start_new_page{
    page-break-before: always;
}

/*blank*/
section[data-type="blank"]{
    page-break-after: always;
}
.en{
    text-align: justify;
    text-justify:  inter-word;
}

.jp{
    text-align: justify;
    text-justify:  inter-word;
}

/* and more... ğŸ–‹ */
