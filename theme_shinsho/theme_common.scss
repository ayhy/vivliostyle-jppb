/* test
 * For all media (print, screen)
 */

/* you can import partial SCSS files */
/* @import '_variables'; */
/* @import '_toc'; */
/* ... */

@use "./_param.scss" as param;

@charset "UTF-8";

html {
  writing-mode: vertical-rl;
  orphans: 1;
  widows: 1;
  counter-reset: footnote;
}

* {
  margin: 0;
  padding: 0;
}

body > section {
  string-set: section attr(title);
  break-after: page;
}


@page {
  size: param.$page_width param.$page_height;

  font-size: 8.5pt; /*12Q*/
  font-family:'Gilda Display', 'GenEiChikuMin', serif;

/* Êñ≠„Å°Âàá„Çä„ÄÅÂ°ó„ÇäË∂≥„Åó„ÅÆÊåáÂÆö - ‰∏çË¶Å„Å™Â†¥Âêà„ÅØ„Åì„Åì„Çí„Ç≥„É°„É≥„Éà„Ç¢„Ç¶„Éà„Åô„Çã */

@if param.$use_bleed { 
  bleed: param.$bleedmargin; 
  marks: crop cross; 
}
/* ‰ΩôÁôΩ„ÅÆÊåáÂÆö */
  margin-top: param.$topmargin; /*Â§©*/
  margin-bottom: param.$bottommargin; /*Âú∞*/
  margin-left: param.$lrmargin; /*Â∞èÂè£*/
  margin-right: param.$lrmargin; /*Â∞èÂè£*/
}

@page :left {
  margin-right: param.$bindmargin; /*„Éé„Éâ*/
  @bottom-left {
    font-size: 8pt;
      content: counter(page) '„ÄÄ' env(pub-title);
      margin-left: 0mm;
      margin-bottom: 3mm;
      writing-mode: horizontal-tb;
  }

  @if param.$use_bleed { 
    /* Èö†„Åó„Éé„É≥„Éñ„É´ */
    @top-right-corner {
      margin-top:calc(0mm - (param.$bleedmargin)*2.0 - 5pt);
      margin-right:0;
      vertical-align: top;
      text-align: right;
      font-size: 5pt;
      color:black;
      content: counter(page);
      writing-mode: horizontal-tb;
    }
  }
}

@page :right {
  margin-left: param.$bindmargin; /*„Éé„Éâ*/
  @bottom-right {
      font-size: 8pt;

      content: string(section) '„ÄÄ' counter(page);
      margin-right: 5mm;
      margin-bottom: 3mm;
      content: counter(page);

      writing-mode: horizontal-tb;
  }
  @if param.$use_bleed { 
    /* Èö†„Åó„Éé„É≥„Éñ„É´ */
    @top-left-corner {
      margin-top:calc(0mm - (param.$bleedmargin)*2.0 - 5pt);
      margin-left:0;
      vertical-align: top;
      text-align: left;
      font-size: 5pt;
      color:black;
      content: counter(page);
      writing-mode: horizontal-tb;
    }
  }
}

@page :blank { /* Áèæver„Åß„ÅØË™çË≠ò„Åï„Çå„Åö„ÄÅÊèèÁîª„ÇÇ„Åï„Çå„Å™„ÅÑÔºü */
  @if param.$use_bleed { 
    /* Èö†„Åó„Éé„É≥„Éñ„É´ */
    @top-center {
      margin-top:calc(0mm - (param.$bleedmargin)*2.0 - 5pt);
      margin-left:0;
      vertical-align: top;
      text-align: left;
      font-size: 5pt;
      color:black;
      content: counter(page);
      writing-mode: horizontal-tb;
    }
  }
}

@page frontmatter { /* Named page rule (name: "frontmatter") */

  @bottom-left { content: none; }
  @bottom-right { content: none; }
}

@page backmatter { /* Named page rule (name: "backmatter") */

  @bottom-left { content: none; }
  @bottom-right { content: none; }
}

@page shortstory_title { /* Named page rule (name: "shortstory_title") */

  @bottom-left { content: none; }
  @bottom-right { content: none; }
}

@page illustration{
  margin: calc(0mm - param.$bleedmargin);
  @bottom-left { content: none; }
  @bottom-right { content: none; }
}

html {
  font-family:'Gilda Display', 'GenEiChikuMin', serif;
  /* Á¥ÑÁâ©„ÅÆË™øÊï¥„ÄÅÂíåÊ¨ßÊñáÈñì„Çπ„Éö„Éº„Çπ */
  text-spacing: space-first allow-end ideograph-alpha ideograph-numeric;
  line-height: 2em;
}

body{
  margin-top:0mm;
  margin-bottom:0mm;
}

h1 {
  font-weight: bold;
  font-size: 1.35rem;
  break-after: avoid;
  line-height: 6rem;
  letter-spacing: 0.125em;
}

h2 {
  font-weight: normal;
  font-size: 1.18rem;
  text-indent: 3rem;
  break-after: avoid;
  line-height: 4rem;
}

ruby > rt {
  font-size: 0.4rem;
  margin-top:-2px; /*for firefox only*/
  margin-bottom:-2px; /*for firefox only*/
  margin-left:-1px; /*for firefox only*/
  margin-right:-1px; /*for firefox only*/
}

p {
  text-indent: 0em;
  /* ÊÆµËêΩÂÖàÈ†≠Á¥ÑÁâ©„ÅÆË™øÊï¥„ÄÅË°åÊú´Âè•Ë™≠ÁÇπ„Å∂„Çâ‰∏ã„Åí„ÅÇ„Çä */
  hanging-punctuation: first allow-end;
}

header{
  display:none;
}
/* Role-Related Layout Styles */
/* Ââç‰ªò„Åë */
section[role="frontmatter"] {
  page: frontmatter;
  position:absolute;
  bottom:0;
  left:10vw;
  width:90vw;
  height:100vh;

  writing-mode: horizontal-tb;
  margin:0mm;
  padding:0;
  text-align: center;
  /*
  width:100vw;
  height: 100vh;
  orphans: 1;
  widows: 1;
  margin: auto;
  text-align: center;
  */

  /* Âè¢Êõ∏„ÄÅÊñáÂ∫´„ÄÅÊñ∞Êõ∏„Å™„Å©„ÅÆ„Ç∑„É™„Éº„Ç∫Âêç */
  .series {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  /* È°åÂêç */
  .maintitle {
    font-family: 'Zen Old Mincho', serif;
    font-weight: 700;
    font-size: 2rem;
    line-height: 4rem;
    padding-top:2em;
    padding-bottom:2em;
  }

  /* ÂâØÈ°å */
  .subtitle {
    display: inline-block;
    font-family: 'Faster One', cursive;
    line-height:1.2em; font-style:normal;
    font-weight:400; font-size: 20px;
    border-style:solid; border-color:black;
    padding-top:0em;
    padding-bottom:0em;
    width:fit-content;
    margin-top:2em;
    margin-bottom:3em;
    padding-right: 0.15em;
  }

  /* Ë£úË∂≥ */
  .extra {
    display:inline-block;
    width:fit-content;
    padding-bottom:4em;
  }

  /* ÁâàÂÖÉ */
  .publisher {
    display:block;
  }

  .disclaimer {
    display:block;
    text-align: left;
    position: absolute;
    bottom: 20pt;
    font-size: 7.5pt;
    line-height: 13pt;
  }
}


/* ÁõÆÊ¨° */
section[role="toc"]{
  page: frontmatter;
  &:after{
    counter-reset: chap;
  }
  nav{
    font-size:8.5pt;
    /* „Éö„Éº„Ç∏ÂÜÖ‰∫åÊÆµÁµÑ*/
    /* Ë§áÊï∞„Éö„Éº„Ç∏„Å´Ë∑®„Åå„Çã‰∫åÊÆµÁµÑ„Åø„Å®„Åó„Å¶„ÅØ‰Ωø„Åà„Å™„ÅÑ */
    /* Ë§áÊï∞„Éö„Éº„Ç∏„Å´Ë∑®„Åå„Çã‰∫åÊÆµÁµÑ„Åø„Çí‰Ωø„ÅÜÂ†¥Âêà„ÅØ„ÄÅsrc.json„ÅÆtoc„ÅÆ„Å®„Åì„Çç„Åß */
    /* „Åù„ÅÆÂ†¥Âêà„ÅØ scr.json„ÅÆstyle>toc>„ÅÆÊú´Â∞æ„Å´ */
    /* ./theme/make_2column.css„ÇíÊåáÂÆö„Åô„Çã„Åì„Å® */

    column-gap: 3em;
    column-fill: balance; /* auto„ÅØchrome„ÅÆÂ†¥ÂêàË°®Á§∫„ÅåÂ¥©„Çå„Çã*/
    column-count:2;

    padding-bottom:12mm;
    margin-left:0mm;
    margin-right:0mm;

    width:80vw;

    /* 1ÈöéÂ±§ÁõÆ„Å´„ÅÆ„ÅøÁ´†„Çí„Å§„Åë„Çã„ÄÄ*/
    &>ul,&>ol {
      counter-reset: chap;
      & > li{
        display: flex;
        flex-direction: column;   /* flex container„ÅÆÁ∏¶Êõ∏„ÅçË®≠ÂÆö */
        justify-content: flex-start;   /* Â∑¶Âè≥Ë®≠ÂÆö - Âè≥ */
        align-items: flex-between;   /* ‰∏ä‰∏ãÈÖçÁΩÆ - ‰∏ä */
        height:40vh; /* ÁõÆÊ¨°È´ò„ÅïË®≠ÂÆö */
        margin-top:0em;
        margin-left:0em;
      }

      /* Á¨¨NÁ´†„ÄÄ„ÅÆË°®Á§∫„ÇíËá™ÂãïÁîüÊàê„Åô„ÇãÂ†¥Âêà„Å´„Ç≥„É°„É≥„Éà„Ç¢„Ç¶„Éà„Åô„Çã*/
      /* ‰∫åÊ°Å‰ª•‰∏ä„ÅÆÁ´†Êï∞„Å†„Å®Êº¢Êï∞Â≠óË°®Ë®ò„Åå„Åä„Åã„Åó„Åè„Å™„Çã„Åü„ÇÅ„ÄÅÁèæÁä∂„ÅØÈùûÊé®Â•®*/
      /* Êº¢Êï∞Â≠óË°®Ë®ò„ÅØcjk-ideographic„Åß„ÅØ„Å™„Åè„ÄÅ@counter-styleÂÆöÁæ©„ÅÆ */
      /* cjk-decimal „Åã japanese-informal„ÄÅ„Åæ„Åü„ÅØ„Åù„ÇåÂèÇÁÖß„Åó„Åü„ÇÇ„ÅÆ„ÅåÊúõ„Åæ„Åó„ÅÑ */
      /* ‚Äª202207ÊôÇÁÇπ„Åß„ÅØcounter-style„ÅØ„Çµ„Éù„Éº„ÉàÂ§ñ*/
      /*
      & > li::after {
        display: inline flex;
        counter-increment: chap;
        content: "Á¨¨" counter(chap,cjk-decimal) "Á´† ";
        text-combine-upright: digits 2;
        float: top;
        width: 0em;
        margin-top: -4em;
      }
      */
    }
    
    li {
      a {
        display: flex;
        float:top;
        width: 100%;
        text-decoration: none;
        color: currentcolor;
        break-inside: avoid;
        order: 1;

        &::before{ /* ÁÇπÁ∑ö */
          display:inline;
          float: top;
          margin-left: 1px;
          margin-right: 1px;
          border-top: solid 3px white;
          border-bottom: solid 3px white;
          content: "„ÄÄ";
          background-image : linear-gradient(to bottom, rgb(0, 0, 0), rgb(0, 0, 0) 2px, transparent 1px, transparent 1px); 
          background-size: 1px 9px; /*ÈñìÈöî„Å´ÂΩ±Èüø*/
          transform:translate(1px,0px);
          background-position: center;
          background-repeat: repeat-y;
          align-self: flex-end;
          order: 1;
          flex: auto;
        }
        &::after{ /* „É™„É≥„ÇØ */
          display: inline flex;
          font-size:5pt;
          content: target-counter(attr(href, url), page,decimal);
          text-combine-upright: all; /*Ëã±Êï∞Â≠óÁ∏¶‰∏≠Ê®™*/
          flex: none;
          order: 1;
          text-align:left;
        }
      }
    }
  }
}

/*ÁåÆËæû*/
section[role="dedication"]{
  page: frontmatter;
  font-size:8.5pt;
  position: absolute;
  top: 60%;
  left: 55%;
  height:80vh;
  transform: translate(-50%, -50%);

}

/*„Ç®„Éî„Ç∞„É©„Éï*/
section[role="epigraph"]{
  page: frontmatter;
}

/* ‰∏≠Êââ */
section[role="halftitle"] {
  page: frontmatter;
  h1{
    font-family: 'Zen Old Mincho', serif;
    position: absolute;
    top: 30%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-style: bold;
    page-break-before: always;
    page-break-after: always;
  }
}

/* Êú¨Êñá */
section[role="doc-body"] {
  page: default;
  font-size:8.75pt; /*12Q / QÊåáÂÆö„ÇÇÂèØËÉΩ*/
  line-height:15pt;
  page-break-inside: auto;

  /*„Éï„Ç©„É≥„Éà„Å®„ÅÆÁõ∏ÊÄß„Å´„Çà„Å£„Å¶„ÅØ„Åì„Å°„Çâ„ÅÆ„Åª„ÅÜ„ÅåË¶ã„ÇÑ„Åô„ÅÑ„Ç±„Éº„Çπ„ÅÇ„Çä*/

  /* ‰∫åÊÆµÁµÑ 
  columnÈñ¢ÈÄ£„ÅÆÊåáÂÆö„ÅØ„ÄÅÁèæÊôÇÁÇπ„Åß„ÅØbody/html‰∏ã„ÅßÊåáÂÆö„Åó„Å™„ÅÑ„Åã„Åé„Çä
  Ê©üËÉΩ„Åó„Å™„ÅÑ„ÅÆ„Åß„Ç≥„É°„É≥„Éà„Ç¢„Ç¶„Éà„Åô„Çã„ÄÇ
  Èñ¢ÈÄ£‚Üíhttps://github.com/vivliostyle/vivliostyle.js/issues/579
  ‰ª£„Çè„Çä„Å´make_column.css„ÇíÊú¨Êñá„Éï„Ç°„Ç§„É´„ÅßÊåáÂÆö„Åó„Å¶Ë™≠„ÅøËæº„ÇÄ
  column-fill:auto;
  column-gap: 2em;
  column-count:2;
  line-height:16pt;
  margin-left:15mm;
  margin-right:15mm;
  */
  /* Á´†È°å */
  h1 {
    display:block;
/*    position:absolute;*/
    right:10mm;
    font-size: 12pt;
    font-style: normal;
    line-height:15pt;

    /* Á¨¨NÁ´†„ÄÄ„ÅÆË°®Á§∫„ÇíËá™ÂãïÁîüÊàê„Åô„ÇãÂ†¥Âêà„Å´„Ç≥„É°„É≥„Éà„Ç¢„Ç¶„Éà„Åô„Çã*/
    /* ‰∫åÊ°Å‰ª•‰∏ä„ÅÆÁ´†Êï∞„Å†„Å®Êº¢Êï∞Â≠óË°®Ë®ò„Åå„Åä„Åã„Åó„Åè„Å™„Çã„Åü„ÇÅ„ÄÅÁèæÁä∂„ÅØÈùûÊé®Â•®*/
    /* Êº¢Êï∞Â≠óË°®Ë®ò„ÅØcjk-ideographic„Åß„ÅØ„Å™„Åè„ÄÅ@counter-styleÂÆöÁæ©„ÅÆ */
    /* cjk-decimal „Åã japanese-informal„ÄÅ„Åæ„Åü„ÅØ„Åù„ÇåÂèÇÁÖß„Åó„Åü„ÇÇ„ÅÆ„ÅåÊúõ„Åæ„Åó„ÅÑ */
    /* ‚Äª202207ÊôÇÁÇπ„Åß„ÅØcounter-style„ÅØ„Çµ„Éù„Éº„ÉàÂ§ñ*/
    /*
    counter-increnemt: chap;
      &::before{
      display: inline flex;
      counter-increment: chap;
      content: "Á¨¨" counter(chap,cjk-decimal) "Á´† ";
      float: top;
      width: 0em;
      margin-top: -4em;
    }
    */
    }
  
  /* Á´†ÂâØÈ°å */
  h2 {
    font-size:8.75pt;
    page-break-before: auto;
    page-break-after: auto;
    text-indent: 0em;
    margin-top:2em;
    line-height:15pt;
    &:before{
      content: "‚óÜ„ÄÄ";
      font-size:8.75pt;
      display:inline;
    }
  }
  &>section{
    page-break-after: auto;
    margin-left:0;
    margin-right:0;
  }
  .body-text {
    font-style: normal;
  }

  /* Ë£úË∂≥„ÉÜ„Ç≠„Çπ„Éà */
  .comment{
    font-style: normal;
  }
  .script{ /* ÁâπÊÆäÂΩ¢Âºè - Âè∞Êú¨ */
    p{
      padding-top:2em; /*‰∫∫Âêç„ÅÆÊúÄÂ§ßÊñáÂ≠óÊï∞„ÇíÊåáÂÆö*/
      .name{
        display:inline-block;
        margin-top:-2em; /*‰∫∫Âêç„ÅÆÊúÄÂ§ßÊñáÂ≠óÊï∞„ÇíÊåáÂÆö*/
        &::after{
          content:"Ôºö"
        }
      }
    }
  }
  .illustration{ /* ÊåøÁµµ - Á¥ôÈù¢+Â°ó„ÇäË∂≥„Åó */
    page: illustration;
    position:absolute;
    margin:0mm;
    page-break-before: always;
    page-break-after: always;
    width:calc(param.$page_width + ( 2 * param.$bleedmargin) );
    height:calc(param.$page_height + ( 2 * param.$bleedmargin) );
    /*
      border-color: gray;
      border-width: 1px;
      border-style: dashed;
    */
    img{
      image-resolution: 350dpi;
    }
  }
}



/*Êú¨Êñá„ÉªÁâπÊÆäÂΩ¢Âºè - Áü≠Á∑®Â∞èË™¨„ÅÆË°®È°å+Êîπ„Éö„Éº„Ç∏+Êú¨ÊñáÂΩ¢Âºè*/
section[role="doc-body"].shortstory{
  page-break-before: recto;
  page: shortstory_title;
  h1{
    overflow: visible;
    font-family: 'Zen Old Mincho', serif;
    writing-mode: horizontal-tb;
    position: absolute;
    left:0pt;
    margin-top:48vh;    
    transform:tranlate(-50% -50%);
    bottom: 0px;
    font-style: bold;
    page-break-before: always;
    page-break-after: avoid;
    font-size:15pt;
  }
  h2:first-of-type:not(.comment) {
    overflow: visible;
    position: absolute;
    writing-mode: horizontal-tb;
    left:0pt;
    margin-top:52vh;    
    page-break-before: avoid;
    page-break-after: avoid;
    height:50vh;
    top: 50%;
    left: 30%;
    transform: translate(-50%, -50%);
    font-style: bold;
    &::before{
      content:"";
    }
  }
  section.body-text{
    page: default; /*„Éö„Éº„Ç∏Áï™Âè∑„ÇíË°®Á§∫Áä∂ÊÖã„Å∏*/
    & > p:first-of-type {
      page-break-before: always;
    }
  }
  .comment p{
    page: default; /*„Éö„Éº„Ç∏Áï™Âè∑„ÇíË°®Á§∫Áä∂ÊÖã„Å∏*/
    h2 {
      position:relative;
      display:inline-block;
      font-size:8.75pt;
      page-break-before: auto;
      page-break-after: auto;
      text-indent: 0em;
      margin-top:2em;
      line-height:15pt;
      &:before{
        content: "‚óÜ„ÄÄ";
        font-size:8.75pt;
        display:inline;
      }
    }
  }
}

/* Âæå‰ªò„Åë */
section[role='colophon'] {
  page: backmatter;
  page-break-before: verso;
  writing-mode: horizontal-tb;
  width:40vh;
  height:25vh;
  position:absolute;
  vertical-align: bottom;
  bottom:10mm;
  font-size:8pt;
  /* Â••‰ªòÊú¨‰Ωì */
  .title{
    font-family: 'Zen Old Mincho', serif;
    font-size:13pt;
    line-height:16pt;
  }
  dl{
    display:flex;
    align-items: stretch;
    flex-wrap: wrap;
    font-size:8pt;
    line-height:10pt;
    margin-top:1px;
    margin-bottom:1px;
    margin-left:0px;
    margin-right:0px;
    padding-top: 1px;
    padding-bottom: 1px;
      dt {
        width: 20%; /* dt width + dd width must be 100%*/
      }
      dd {
        width: 80%;
      }
  }
  hr {
    border-top: 1px solid black;
  }
  .note{
    display: block;
    font-size:7.5pt;
    line-height:1.6em;
    border-top: solid 1px black;
  }
  /* ËëóËÄÖ */
  .author {
    text-align: end;
    font-size: 1rem;
    font-weight: bold;
    letter-spacing: 0.125em;
  }
}


/* Universal Layout settings  */

/* Á∏¶‰∏≠Ê®™ */
.tcy {
  text-combine-upright: all;
}

.upright {
  text-orientation: upright;
}

/* Áü≠„ÅÑËÑöÊ≥® inline-note*/
.footnote {
  float:footnote;
  font-size: 5%;
  text-align: left;
  counter-increment: footnote;
  vertical-align: top;
  line-height: 0;

  a {
    word-break: break-all;
  }
  &::footnote-call,
  &::footnote-marker {
    text-combine-upright: all;
    content: '[' counter(footnote) ']';
  }
   
  &::footnote-call {
    margin-top: -0.175rem;
    margin-right: -0.3rem;
    font-size: 5%;
  }

  &::footnote-marker {
    margin-top: 0rem;
  }
}



/* ÂÇçÁÇπÔºà„ÉªÔºâ */
.dotted {
  font-style: normal;
  text-emphasis-style: dot;
}


/* ÂúèÁÇπÔºà„Ç¥„ÉûÔºâ */
em.sesame_dot {
  font-style: normal;
  text-emphasis-style: sesame;
}

.start_new_page{
    page-break-before: always;
}

/*blank*/
section[data-type="blank"]{
    page-break-after: always;
}
.en{
    text-align: justify;
    text-justify:  inter-word;
}

.jp{
    text-align: justify;
    text-justify:  inter-word;
}

/* and more... üñã */
